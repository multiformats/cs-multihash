language: csharp
solution: Multiformats.Hash.sln
branches:
  only:
    - master
install:
  - nuget restore ./Multiformats.Hash/packages.config -PackagesDirectory ./packages
  - nuget restore ./Multiformats.Hash.Tests/packages.config -PackagesDirectory ./packages
  - nuget install NUnit.ConsoleRunner -Version 3.5.0 -OutputDirectory testrunner
script:
  - xbuild /p:Configuration=Release Multiformats.Hash.sln
  - mono ./packages/OpenCover.4.6.519/tools/OpenCover.Console.exe -target:./testrunner/NUnit.ConsoleRunner.3.5.0/tools/nunit3-console.exe -targetargs:"/noh /noc ./Multiformats.Hash.Tests/bin/Release/Multiformats.Hash.Tests.dll" -oldstyle -returntargetcode -log:off -excludebyattribute:*.ExcludeFromCodeCoverage* -filter:"+[Multiformats.Hash*]* -[*Tests]* -[*Benchmarks]*" -hideskipped:All -output:./Multiformats.Hash_coverage.xml -register:user
after_success:
  - bash <(curl -s https://codecov.io/bash)
cache:
  - directories:
    - ./packages